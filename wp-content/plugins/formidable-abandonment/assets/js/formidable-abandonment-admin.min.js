!function(){"use strict";const t={lastActionId:0,abandonmentEmailAction:document.getElementById("abandonment-email-action"),init(){this.abandonmentEmailAction&&this.abandonmentEmailAction.addEventListener("click",(()=>this.createAction()))},async createAction(){const{div:t}=frmDom,e=this.getNewActionId(),o=document.getElementById("form_id").value,n=new FormData;n.append("action","frm_add_form_action"),n.append("type","email"),n.append("list_id",e),n.append("form_id",o),n.append("abandonment_form_action","true"),n.append("nonce",frmGlobal.nonce);let r="";try{r=await fetch(ajaxurl,{method:"POST",body:n})}catch(t){return}const i=await r.text();document.querySelector('.frm-form-setting-tabs li a[href="#email_settings"]').dispatchEvent(new Event("click")),document.querySelectorAll(".frm_form_action_settings.open").forEach((t=>t.classList.remove("open")));const a=t();a.innerHTML=i;const c=a.querySelector(".widget-top"),m=document.getElementById("frm_notification_settings");Array.from(a.children).forEach((t=>m.appendChild(t)));const d=document.getElementById(`frm_form_action_${e}`);d.classList.add("open"),document.getElementById("post-body-content").scroll({top:d.offsetTop+10,left:0,behavior:"smooth"}),document.querySelectorAll(".frm_email_action").forEach((t=>{t.querySelector(".frm_show_upgrade")||(t.classList.remove("frm_inactive_action","frm_already_used"),t.classList.add("frm_active_action"))})),this.showInputIcon(`#frm_form_action_${e}`),jQuery("#frm_form_action_"+e+" .frm_multiselect").hide().each(frmDom.bootstrap.multiselect.init),frmDom.autocomplete.initAutocomplete("page",d),c&&jQuery(c).trigger("frm-action-loaded")},getNewActionId(){const t=document.querySelectorAll(".frm_form_action_settings");let e=this.getNewRowId(t,"frm_form_action_");return document.getElementById(`frm_form_action_${e}`)&&(e+=100),this.lastActionId>=e&&(e=this.lastActionId+1),this.lastActionId=e,e},getNewRowId(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.length?parseInt(t[t.length-1].id.replace(e,""),10)+1:o},showInputIcon(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.maybeAddFieldSelection(t);document.querySelectorAll(`${t} .frm_has_shortcodes:not(.frm-with-right-icon) input,${t} .frm_has_shortcodes:not(.frm-with-right-icon) textarea`).forEach((t=>{const e=document.createElement("span");e.classList.add("frm-with-right-icon"),t.parentNode.insertBefore(e,t),e.appendChild(t),e.insertAdjacentHTML("afterbegin",'<svg class="frmsvg frm-show-box"><use xlink:href="#frm_more_horiz_solid_icon"/></svg>')}))},maybeAddFieldSelection(t){document.querySelectorAll(`${t} :not(.frm_has_shortcodes) .frm_not_email_message, ${t} :not(.frm_has_shortcodes) .frm_not_email_to, ${t} :not(.frm_has_shortcodes) .frm_not_email_subject`).forEach((t=>{t.parentNode.classList.add("frm_has_shortcodes")}))}};var e,o=t;e=()=>{o.init()},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e())}();