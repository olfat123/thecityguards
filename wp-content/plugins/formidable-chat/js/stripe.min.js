(function(){var linkAuthenticationElementIsComplete,stripeLinkElementIsComplete;window.frmChatForm={maybeHandleAuthenticationChange:function(form,eventComplete){var isConversational=form.querySelector(".frm_fields_container").classList.contains("frm_chat_form");if(!isConversational)return false;linkAuthenticationElementIsComplete=eventComplete;if(!form.querySelector(".frm_active_chat_field .frm-link-authentication-element, .frm_active_chat_field.frm-link-authentication-element"))return false;toggleConversationalButtons(form,
eventComplete);return true},maybeHandlePaymentChange:function(form,eventComplete){if(!form.querySelector(".frm_chat_form"))return false;stripeLinkElementIsComplete=eventComplete;if(chatWrapperIsOnFinalQuestion(form))return false;if(form.querySelector(".frm_active_chat_field .frm-payment-element"))toggleConversationalButtons(form,eventComplete);return true}};function initialize(){document.addEventListener("frmStripeLiteEnableSubmit",handleStripeLiteEnableSubmitEvent);document.addEventListener("frmStripeLiteDisableSubmit",
handleStripeLiteDisableSubmitEvent);document.addEventListener("frmStripeLiteLoadElements",handleStripeLiteLoadElementsEvent);document.addEventListener("frmStripeLiteAddAuthElementAboveCardElement",handleStripeLiteAddAuthElementAboveCardElementEvent)}function handleStripeLiteEnableSubmitEvent(event){var form;if("undefined"===typeof event.frmData||"undefined"===typeof event.frmData.form)return;form=event.frmData.form;maybeToggleConversationalButtonsOnFinalQuestion(form,true)}function handleStripeLiteDisableSubmitEvent(event){var form;
if("undefined"===typeof event.frmData||"undefined"===typeof event.frmData.form)return;form=event.frmData.form;maybeToggleConversationalButtonsOnFinalQuestion(form,false)}function handleStripeLiteLoadElementsEvent(event){var cardElement,isConversational;if("object"!==typeof event.frmData.cardElement)return;cardElement=event.frmData.cardElement;isConversational=maybeAddConversationalSubmitListener(cardElement);if(isConversational)jQuery(document).on("frmShowField",syncConversationalButtonsAfterContinueAction)}
function handleStripeLiteAddAuthElementAboveCardElementEvent(event){var cardElement,isConversational,cardFieldContainer,authenticationMountTarget;if("object"!==typeof event.frmData||"object"!==typeof event.frmData.cardFieldContainer||"object"!==typeof event.frmData.cardElement||"object"!==typeof event.frmData.authenticationMountTarget)return;cardElement=event.frmData.cardElement;isConversational=cardElement.closest(".frm_fields_container").classList.contains("frm_chat_form");if(!isConversational)return;
cardFieldContainer=event.frmData.cardFieldContainer;authenticationMountTarget=event.frmData.authenticationMountTarget;if(cardFieldContainer.classList.contains("frm_active_chat_field")){cardFieldContainer.classList.remove("frm_active_chat_field");cardFieldContainer.classList.add("frm_inactive_chat_field");authenticationMountTarget.classList.add("frm_active_chat_field")}else authenticationMountTarget.classList.add("frm_inactive_chat_field");triggerQuestionCountChangeEvent(cardElement)}function maybeToggleConversationalButtonsOnFinalQuestion(form,
enabled){var formId;if(!chatWrapperIsOnFinalQuestion(form))return;formId=parseInt(form.querySelector('[name="form_id"]').value);if(submitButtonIsConditionallyDisabled(formId))return;toggleConversationalButtons(form,enabled)}function submitButtonIsConditionallyDisabled(formId){return submitButtonIsConditionallyNotAvailable(formId)&&"disable"===__FRMRULES["submit_"+formId].hideDisable}function submitButtonIsConditionallyNotAvailable(formId){var hideFields=document.getElementById("frm_hide_fields_"+
formId);return hideFields&&-1!==hideFields.value.indexOf('["frm_form_'+formId+'_container .frm_final_submit"]')}function chatWrapperIsOnFinalQuestion(form){return form.nextElementSibling&&form.nextElementSibling.classList.contains("frm_final_question")}function syncConversationalButtonsAfterContinueAction(){var form=document.querySelector(".frm_stripe_link_form");if(chatWrapperIsOnFinalQuestion(form)){if("object"===typeof window.frmStripeLiteForm&&"function"===typeof frmStripeLiteForm.readyToSubmitStripeLink)toggleConversationalButtons(form,
frmStripeLiteForm.readyToSubmitStripeLink(form));return}maybeToggleConversationalButtonsOnLinkAuthenticationQuestion(form);if(form.querySelector(".frm_active_chat_field .frm-payment-element"))toggleConversationalButtons(form,stripeLinkElementIsComplete)}function maybeToggleConversationalButtonsOnLinkAuthenticationQuestion(form){linkAuthenticationElement=form.querySelector(".frm_active_chat_field .frm-link-authentication-element, .frm_active_chat_field.frm-link-authentication-element");if(!linkAuthenticationElement)return;
setTimeout(function(){toggleConversationalButtons(form,linkAuthenticationElementIsComplete)},0)}function maybeAddConversationalSubmitListener(cardElement){var isConversational,form;isConversational=cardElement.closest(".frm_fields_container").classList.contains("frm_chat_form");if(!isConversational)return false;form=cardElement.closest("form");jQuery(form).on("submit",handleConversationalSubmit);function handleConversationalSubmit(e){if(typeof frmProForm!=="undefined"&&frmProForm.goingToPreviousPage(form))return;
if("object"===typeof window.frmStripeLiteForm&&"function"===typeof frmStripeLiteForm.processForm)frmStripeLiteForm.processForm(cardElement,e,form);return false}return true}function toggleConversationalButtons(form,enabled){var chatWrapper,nextArrow,continueButton;if(!form.nextElementSibling)return;chatWrapper=form.nextElementSibling;nextArrow=chatWrapper.querySelector(".frm_chat_next_arrow");continueButton=chatWrapper.querySelector(".frm_continue_chat");if(nextArrow)nextArrow.classList.toggle("frm_disabled_arrow",
!enabled);if(continueButton)continueButton.toggleAttribute("disabled",!enabled)}function triggerQuestionCountChangeEvent(cardElement){var form,progress;form=cardElement.closest("form");progress=form.querySelector(".frm-chat-progress");if(progress)progress.setAttribute("frm-question-total",parseInt(progress.getAttribute("frm-question-total"))+1);frmFrontForm.triggerCustomEvent(form,"frmUpdatedQuestionCount")}initialize()})();
