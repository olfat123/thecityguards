(function(){var state,tabState,progressByFormId;state={animatingFields:false,ignoringClickEvents:false,activeForm:false};tabState={currentIndex:0};progressByFormId={};function initialize(){if(!browserIsSupported()){revertChatForm();return}maybeAddPolyfills();each(getChatForms(),initializeForm);state.activeForm=false;addGlobalEventListeners();jQuery(document).ready(handleDocumentReady)}function getChatForms(){return document.querySelectorAll(".frm_chat_form")}function initializeForm(form,index){var formId;
state.activeForm=form;if(getProgressElement()){formId=getActiveFormId();progressByFormId[formId]={questionNumber:getProgressOffset()+1,numberOfQuestions:getProgressAttr("frm-question-total")};listenForQuestionCountChanges(form,formId)}addEventListenersToFormElements();toggleChatElements();hideElementsOnStartPage();maybeSyncProgress();skipActiveFieldIfConditionallyHidden();syncFinalQuestionClass();maybeAddSectionFieldLabel(getActiveField());if(0===index&&shouldFocusOnFirstFieldByDefault())focusInputInField(getActiveFields());
tabState.visibleInputs=getVisibleInputs()}function syncFinalQuestionClass(){toggleClass(getActiveChatWrapper(),"frm_final_question",onFinalQuestion())}function getActiveFormId(){return getFormId(state.activeForm)}function getFormId(form){var container=getClosestParent(form,".frm_forms");return container.id.replace("frm_form_","").replace("_container","")}function hideElementsOnStartPage(){var chatArrows,progress;if(!isOnStartPage())return;chatArrows=getActiveChatWrapper().querySelector(".frm_chat_arrows");
if(chatArrows)toggleClass(chatArrows,"frm_hidden",true);progress=getProgressElement();if(progress)toggleClass(progress,"frm_hidden",true)}function skipActiveFieldIfConditionallyHidden(){var form=state.activeForm;jQuery(document).ready(function(){var previousActiveFormValue,activeField;previousActiveFormValue=state.activeForm;state.activeForm=form;activeField=getActiveField();if(isConditionallyHidden(activeField)||isHiddenSectionLabel(activeField)){--getProgress().questionNumber;continueChat()}state.activeForm=
previousActiveFormValue})}function maybeAddPolyfills(){if(!Element.prototype.matches)Element.prototype.matches=Element.prototype.msMatchesSelector}function browserIsSupported(){return"function"===typeof document.addEventListener}function revertChatForm(avoidRevertOnFormInit){var chatForms,chatForm,chatFields,length,index;chatForms=document.querySelectorAll(".frm_chat_form");length=chatForms.length;for(index=0;index<length;++index){chatForm=chatForms[index];if(!avoidRevertOnFormInit)revertOnFormInit(getClosestParent(chatForm,
"form").id);toggleClass(chatForm,"frm_chat_form",false);chatForm.appendChild(getSubmitButton(chatForm))}chatFields=document.querySelectorAll(".frm_active_chat_field, .frm_inactive_chat_field");length=chatFields.length;for(index=0;index<length;++index){if(hasClass(chatFields[index],"frm_chat_start_page")){chatFields[index].remove();continue}toggleClass(chatFields[index],"frm_active_chat_field",false);toggleClass(chatFields[index],"frm_inactive_chat_field",false)}queryAndToggleChatElements(false)}function revertOnFormInit(formId){jQuery(document).ready(function(){var handler=
function(event,form){if(form.id===formId)revertChatForm(true)};jQuery(document).on("frmPageChanged",handler);jQuery(document).on("frmFormComplete",handler)})}function getSubmitButton(fieldContainer){var button,wrapper;button=document.createElement("button");button.className="frm_button_submit";button.setAttribute("type","submit");button.textContent=getClosestParent(fieldContainer,"form").nextElementSibling.querySelector(".frm_continue_final_text").textContent;wrapper=document.createElement("div");
wrapper.className="frm_submit";wrapper.appendChild(button);return wrapper}function addGlobalEventListeners(){document.addEventListener("click",handleClickEvents);document.addEventListener("change",handleChangeEvents);document.addEventListener("input",handleInputEvents);document.addEventListener("keyup",handleKeyEvent);document.addEventListener("keydown",handleKeyEvent);if("undefined"!==typeof window.ssaFormEmbed)addAppointmentListener()}function addEventListenersToFormElements(){var chatWrapper,continueButton,
prevArrow,nextArrow,startButton;chatWrapper=getActiveChatWrapper();continueButton=chatWrapper.querySelector(".frm_continue_chat");if(continueButton)continueButton.addEventListener("click",function(){setActiveFormFromChatNavigationItem(continueButton);continueChat()});prevArrow=chatWrapper.querySelector(".frm_chat_prev_arrow");if(prevArrow)prevArrow.addEventListener("click",function(event){event.preventDefault();if(!hasClass(prevArrow,"frm_disabled_arrow")){setActiveFormFromChatNavigationItem(prevArrow);
goBack()}});nextArrow=chatWrapper.querySelector(".frm_chat_next_arrow");if(nextArrow)nextArrow.addEventListener("click",function(event){event.preventDefault();if(!hasClass(nextArrow,"frm_disabled_arrow")){setActiveFormFromChatNavigationItem(nextArrow);continueChat()}});startButton=state.activeForm.querySelector(".frm_chat_start");if(startButton)startButton.addEventListener("click",function(event){event.preventDefault();state.activeForm=getClosestParent(startButton,".frm_chat_form");continueChat()})}
function setActiveFormFromChatNavigationItem(element){var chatWrapper=getClosestParent(element,".frm-chat-wrapper");state.activeForm=chatWrapper.previousElementSibling.querySelector(".frm_chat_form")}function getActiveChatWrapper(){if(false!==state.activeForm)return getClosestParent(state.activeForm,"form").nextElementSibling;return document.querySelector(".frm-chat-wrapper")}function toggleChatElements(){maybeShowContinueButton();maybeDisableContinueButton();maybeDisableNavigationArrows();syncInSectionClass()}
function getContinueButton(){return getActiveChatWrapper().querySelector(".frm_continue_chat")}function maybeShowContinueButton(){toggleContinueButton(shouldShowContinueButton())}function maybeDisableContinueButton(){var continueButton=getContinueButton();if(onFinalQuestion()&&submitButtonIsConditionallyDisabled())continueButton.setAttribute("disabled","disabled");else continueButton.removeAttribute("disabled")}function shouldShowContinueButton(){var activeFields,show,length,index,field;if(onFinalQuestion()&&
submitButtonIsConditionallyHidden())return false;activeFields=getActiveFields();if(!activeFields.length)return true;show=false;length=activeFields.length;for(index=0;index<length;++index){field=activeFields[index];if(isStartPage(field))return false;show=!fieldIsRequired(field)||!isAutoAdvanceField(field)||!fieldIsMissingData(field);if(show)break}return show}function submitButtonIsConditionallyHidden(){return submitButtonIsConditionallyNotAvailable()&&!submitButtonIsConditionallyDisabled()}function submitButtonIsConditionallyDisabled(){return submitButtonIsConditionallyNotAvailable()&&
"disable"===__FRMRULES["submit_"+getActiveFormId()].hideDisable}function submitButtonIsConditionallyNotAvailable(){var formId,hideFields;if(!onFinalQuestion())return false;formId=getActiveFormId();hideFields=document.getElementById("frm_hide_fields_"+formId);return hideFields&&-1!==hideFields.value.indexOf('"frm_form_'+formId+'_container .frm_final_submit"')}function submitButtonIsHiddenByPositionSetting(){return onFinalQuestion()&&hasClass(getActiveChatWrapper(),"frm-no-submit")}function isStartPage(field){return null!==
field.querySelector(".frm_chat_start")}function fieldIsRequired(field){return hasClass(field,"frm_required_field")}function isAutoAdvanceField(field){return hasClass(field,"frm_autoadvance")}function fieldIsMissingData(field){if(fileIsUploadedInField(field))return false;if(radioFieldIsMissingSelection(field))return true;if(checkboxFieldIsMissingSelection(field))return true;if(hasEmptyInput(field))return true;return false}function fileIsUploadedInField(field){var input=field.querySelector("input[data-frmfile]");
return input&&""!==input.value}function radioFieldIsMissingSelection(field){if(!isRadioType(field))return false;return null===field.querySelector('input[type="radio"]:checked')}function isRadioType(field){return null!==field.querySelector('input[type="radio"]')}function checkboxFieldIsMissingSelection(field){if(!isCheckboxType(field))return false;return null===field.querySelector('input[type="checkbox"]:checked')}function isCheckboxType(field){return null!==field.querySelector('input[type="checkbox"]')}
function hasEmptyInput(field){var hasEmptyField=false;each(getInputsInField(field),function(input){var nodeType,isInputType,isRadioOrCheckbox,dropzone;nodeType=getNodeType(input);isInputType="input"===nodeType;isRadioOrCheckbox=isInputType&&-1!==["radio","checkbox"].indexOf(input.getAttribute("type"));if("select"===nodeType||"textarea"===nodeType||isInputType&&!isRadioOrCheckbox){if(""===input.value)hasEmptyField=true}else if(isRadioOrCheckbox){if(null===getClosestParent(input,".frm_active_chat_field").querySelector("input:checked"))hasEmptyField=
true}else if(hasClass(input,"ssa_booking_iframe")){if(""===field.querySelector(".ssa_appointment_form_field_appointment_id").value)hasEmptyField=true}else if(input.querySelector(".frm_dropzone")){dropzone=input.querySelector(".frm_dropzone");if(dropzone&&"object"===typeof dropzone.dropzone)hasEmptyField=0===dropzone.dropzone.files.length}});return hasEmptyField}function toggleContinueButton(on){var button=getContinueButton();if(button)toggleClass(button,"frm_hidden",!on)}function toggleClass(element,
className,on){jQuery(element).toggleClass(className,on)}function maybeDisableNavigationArrows(){var chatArrows,activeFields,prevArrow,nextArrow,firstActiveField,prevDisabled,nextDisabled;chatArrows=getActiveChatWrapper().querySelector(".frm_chat_arrows");if(!chatArrows)return;activeFields=getActiveFields();if(!activeFields.length)return;prevArrow=chatArrows.querySelector(".frm_chat_prev_arrow");nextArrow=chatArrows.querySelector(".frm_chat_next_arrow");firstActiveField=activeFields[0];prevDisabled=
0===getPreviousFields(firstActiveField).length&&!thereIsAPreviousPageToGoBackTo(state.activeForm);nextDisabled=!shouldShowContinueButton()&&!isOnStartPage();toggleClass(prevArrow,"frm_disabled_arrow",prevDisabled);toggleClass(nextArrow,"frm_disabled_arrow",nextDisabled)}function syncInSectionClass(){var activeField,container,inSection;if(false===state.activeForm)return;activeField=getActiveField();if(!activeField)return;container=getClosestParent(state.activeForm,".frm_chat_form_cont");inSection=
hasClass(activeField,"frm_section_heading")&&!hasClass(activeField,"frm_chat_section");toggleClass(container,"frm_in_section",inSection)}function maybeSyncProgress(){var bar,text;if(false!==state.activeForm){bar=getClosestParent(state.activeForm,"fieldset").querySelector(".frm-progress-bar");text=getClosestParent(state.activeForm,"fieldset").querySelector(".frm-progress-text")}else{bar=document.querySelector(".frm-progress-bar");text=document.querySelector(".frm-progress-text")}if(bar)syncProgressBar(bar);
if(text)syncProgressText(text)}function syncProgressBar(bar){bar.children[0].style.width=getProgressPercent()+"%"}function getProgressPercent(){var numberOfQuestions,currentQuestionNumber,countCurrentQuestion;numberOfQuestions=getTotalNumberOfQuestions();if(0===numberOfQuestions)return 100;currentQuestionNumber=getCurrentQuestionNumber();countCurrentQuestion=true;if(isStartPage(getActiveField()))countCurrentQuestion=false;else each(getActiveFields(),function(field){if(countCurrentQuestion&&hasEmptyInput(field))countCurrentQuestion=
false});if(!countCurrentQuestion)--currentQuestionNumber;return currentQuestionNumber/numberOfQuestions*100}function syncProgressText(text){var textContent=replaceProgressShortcodes(text.getAttribute("frm-progress-string"));if(text.textContent!==textContent){text.textContent=textContent;setTimeout(function(){if(textContent===text.textContent)speak(textContent)},500)}}function speak(message){var element,id;element=document.createElement("div");id="speak-"+Date.now();element.setAttribute("aria-live",
"assertive");element.setAttribute("id",id);element.className="frm_screen_reader frm_hidden";element.textContent=message;document.body.appendChild(element);setTimeout(function(){document.body.removeChild(element)},1E3)}function replaceProgressShortcodes(string){var regex;if(-1!==string.indexOf("[current]"))string=string.replace("[current]",getCurrentQuestionNumber());if(-1!==string.indexOf("[total]"))string=string.replace("[total]",getTotalNumberOfQuestions());if(-1!==string.indexOf("[current show=")){regex=
new RegExp("(\\[)current show=(\"|'){0,1}percent(\"|'){0,1}(\\])","g");string=string.replace(regex,Math.round(getProgressPercent()))}return string}function getCurrentQuestionNumber(){var progress=getProgress();return progress?progress.questionNumber:0}function getTotalNumberOfQuestions(){var progress=getProgress();if(!progress)return 0;return progress.numberOfQuestions-getNumberOfConditionallyHiddenQuestionsOnPage()}function getNumberOfConditionallyHiddenQuestionsOnPage(){var allQuestionsCount,visibleQuestionsCount;
allQuestionsCount=countQuestionsOnPage({includeConditionallyHiddenFields:true});visibleQuestionsCount=countQuestionsOnPage();return allQuestionsCount-visibleQuestionsCount}function countQuestionsOnPage(args){var firstField,field,number,fields;firstField=state.activeForm.querySelector(".frm_active_chat_field, .frm_inactive_chat_field");field={nextElementSibling:firstField,parentNode:firstField.parentNode,className:"frm0"};number=0;if("undefined"===typeof args)args={};args.includeActiveFields=true;
do{fields=getNextFields(field,args);if(!fields.length)break;++number;field=fields[fields.length-1]}while(1);return number}function listenForQuestionCountChanges(fieldContainer,formId){fieldContainer.closest("form").addEventListener("frmUpdatedQuestionCount",syncProgressOnQuestionCountChange);function syncProgressOnQuestionCountChange(){var previousActiveFormValue=state.activeForm;state.activeForm=fieldContainer;progressByFormId[formId].numberOfQuestions=getProgressAttr("frm-question-total");maybeSyncProgress();
state.activeForm=previousActiveFormValue}}function getProgressOffset(){return getProgressAttr("frm-question-offset")}function getProgressAttr(attr){var progress=getProgressElement();return parseInt(progress.getAttribute(attr))}function getProgressElement(){return getClosestParent(state.activeForm,"fieldset").querySelector(".frm-chat-progress")}function getProgress(){var formId=getActiveFormId();if(typeof progressByFormId[formId]==="undefined")return false;return progressByFormId[formId]}function syncRepeaterNavigation(){var activeField,
inRepeater,chatWrapper,navigation;activeField=getActiveField();inRepeater=fieldIsInRepeater(activeField);chatWrapper=getActiveChatWrapper();navigation=chatWrapper.querySelector(".frm-repeater-nav");if(!navigation){if(!inRepeater)return;navigation=getNewRepeaterNav();chatWrapper.insertBefore(navigation,chatWrapper.firstChild)}else toggleClass(navigation,"frm_hidden_repeater_nav",!inRepeater);if(inRepeater){syncRepeaterNavigationContent(navigation);syncRepeaterNavigationButtonsAndLabels(navigation)}}
function getNewRepeaterNav(){var nav,addButton,repeaterProgress,removeButton;nav=document.createElement("div");toggleClass(nav,"frm-repeater-nav",true);addButton=getAnchor();addButton.setAttribute("role","button");addButton.className="frm_chat_repeater_add frm_button";addButton.addEventListener("click",function(event){var section,activeFields;event.preventDefault();section=getClosestParent(getActiveField(),".frm_chat_section");activeFields=getActiveFields();toggleField(section,true);section.querySelector(".frm_add_form_row").click();
jQuery(document).one("frmAfterAddRow",function(){each(activeFields,function(field){toggleField(field,false,false,"left")});focusInputInField(getActiveFields());syncRepeaterNavigationContent(nav)})});repeaterProgress=document.createElement("span");repeaterProgress.className="frm_chat_repeater_progress";removeButton=getAnchor();removeButton.setAttribute("role","button");removeButton.className="frm_chat_repeater_remove frm_button";removeButton.addEventListener("click",function(event){var activeRepeatedSection,
newRepeatedSection,newFields,animationDirection;event.preventDefault();activeRepeatedSection=getClosestRepeaterSectionParent(getActiveField());if(activeRepeatedSection.previousElementSibling&&isRepeatedSection(activeRepeatedSection.previousElementSibling)){animationDirection="right";newRepeatedSection=activeRepeatedSection.previousElementSibling}else if(activeRepeatedSection.nextElementSibling&&isRepeatedSection(activeRepeatedSection.nextElementSibling)){animationDirection="left";newRepeatedSection=
activeRepeatedSection.nextElementSibling}else return;newFields=newRepeatedSection.querySelectorAll(".frm_inactive_chat_field");jQuery(document).one("frmAfterRemoveRow",function(){each(newFields,function(field,index){toggleField(field,true,0===index,animationDirection)});syncFinalQuestionClass()});activeRepeatedSection.querySelector(".frm_remove_form_row").click();syncRepeaterNavigationContent(nav,true)});nav.appendChild(addButton);nav.appendChild(repeaterProgress);nav.appendChild(removeButton);return nav}
function isRepeatedSection(element){return hasClass(element,"frm_repeat_sec")}function getAnchor(){var anchor=document.createElement("a");anchor.setAttribute("href","#");return anchor}function syncRepeaterNavigationContent(nav,deleting){var currentAnswer,numberOfRepeatedAnswers,progress,removeButton;currentAnswer=currentRepeaterAnswer();numberOfRepeatedAnswers=getNumberOfRepeatersAnswers();progress=nav.querySelector(".frm_chat_repeater_progress");removeButton=nav.querySelector(".frm_chat_repeater_remove");
if(deleting){--currentAnswer;--numberOfRepeatedAnswers}if(numberOfRepeatedAnswers<=1){toggleClass(progress,"frm_hidden",true);toggleClass(removeButton,"frm_hidden",true)}else{progress.textContent=currentAnswer+"/"+numberOfRepeatedAnswers;toggleClass(progress,"frm_hidden",false);toggleClass(removeButton,"frm_hidden",false)}}function syncRepeaterNavigationButtonsAndLabels(navigation){var sourceButtonWrapper,sourceButton,showIcons,addButton,removeButton;sourceButtonWrapper=state.activeForm.querySelector(".frm_active_chat_field .frm_repeat_buttons");
sourceButton=sourceButtonWrapper.querySelector(".frm_add_form_row");showIcons=null!==sourceButtonWrapper.querySelector(".frm_icon_font");addButton=navigation.querySelector(".frm_chat_repeater_add");removeButton=navigation.querySelector(".frm_chat_repeater_remove");addButton.innerHTML="";if(showIcons)addButton.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="currentColor"/></svg>';addButton.appendChild(document.createTextNode(sourceButton.textContent));
removeButton.innerHTML="";if(showIcons)removeButton.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
sourceButton=sourceButtonWrapper.querySelector(".frm_remove_form_row");removeButton.appendChild(document.createTextNode(sourceButton.textContent));navigation.style.setProperty("--submit-padding",showIcons?"0 10px 10px":"10px")}function currentRepeaterAnswer(){var count,currentRepeatedSection;currentRepeatedSection=getClosestRepeaterSectionParent(getActiveField());count=1;while(currentRepeatedSection.previousElementSibling&&isRepeatedSection(currentRepeatedSection.previousElementSibling)){++count;
currentRepeatedSection=currentRepeatedSection.previousElementSibling}return count}function getNumberOfRepeatersAnswers(){return getClosestRepeaterSectionParent(getActiveField()).querySelectorAll(getRepeaterSectionSelectionString()).length}function getRepeaterSectionSelectionString(){return".frm_repeat_sec, .frm_repeat_inline, .frm_repeat_grid"}function isOnStartPage(){var activeField=getActiveField();return activeField&&hasClass(activeField,"frm_chat_start_page")}function maybeHideKeyboardInstructions(){var keyboardInstructions=
getActiveChatWrapper().querySelector(".frm-key-instructions");if(keyboardInstructions)toggleClass(keyboardInstructions,"frm_hidden",true)}function handleDocumentReady(){addDatepickerListeners();addChosenListeners();each(document.querySelectorAll(".frm_form_field > .frm_dropzone"),function(element){var dropzoneListener;if("object"!==typeof element.dropzone)return;if(hasClass(element,"frm_single_upload"))element.dropzone.on("success",handleDropzoneUploadSuccess);dropzoneListener=function(){state.activeForm=
getClosestParent(element,".frm_chat_form");maybeSyncProgress()};element.dropzone.on("complete",dropzoneListener);element.dropzone.on("removedfile",dropzoneListener)});setTimeout(syncProgressAfterConditionalLogicRuns,1);jQuery(document).on("frmPageChanged",handlePageChange);jQuery(document).on("frmFormComplete",handleFormComplete);if("undefined"!==typeof frmApiListener)frmApiListener.on("scriptsLoaded",handleApiFormLoad)}function handlePageChange(event,form){checkIfFormIsConversationalAndMaybeReinitialize(form)}
function handleFormComplete(event,form){checkIfFormIsConversationalAndMaybeReinitialize(form)}function handleApiFormLoad(data){var form;if(!data.form||"function"!==typeof data.form.querySelector)return;form=data.form.querySelector(".frm_chat_form");if(!form)return;initializeForm(form,1)}function checkIfFormIsConversationalAndMaybeReinitialize(form){if(form.querySelector(".frm_chat_form"))reinitializeFormAfterAjaxEvent(form.id)}function reinitializeFormAfterAjaxEvent(formId){state.ignoringClickEvents=
false;state.animatingFields=false;setTimeout(function(){var form=document.getElementById(formId);if(form)initializeForm(form.querySelector(".frm_chat_form"))},0)}function addDatepickerListeners(){each(document.querySelectorAll("input.frm_date"),addDatepickerListener);jQuery(document).on("frmdates_date_changed",handleDatepickerChange)}function handleDatepickerChange(event,args){var datepicker=document.querySelector(args.triggerID);setActiveFormFromFieldElement(datepicker);if(args.inline&&getLastActiveInput()===
datepicker)maybeAutoAdvance(datepicker)}function maybeAutoAdvance(input){var field=getClosestParent(input,".frm_active_chat_field");if(!fieldIsInRepeater(field))continueChat()}function setActiveFormFromFieldElement(fieldElement){state.activeForm=getClosestParent(fieldElement,".frm_chat_form")}function addChosenListeners(){jQuery(document).on("change",".frm_chzn",handleChosenChange)}function handleChosenChange(){setActiveFormFromFieldElement(this);if("multiple"!==this.getAttribute("multiple")&&getLastActiveInput()===
this)maybeAutoAdvance(this)}function syncProgressAfterConditionalLogicRuns(){var activeForm=state.activeForm;each(getChatForms(),function(form){state.activeForm=form;maybeSyncProgress();toggleChatElements()});state.activeForm=activeForm}function getClosestParent(element,selector){var activeParent=element.parentNode;while(activeParent&&"function"===typeof activeParent.matches){if(activeParent.matches(selector))return activeParent;activeParent=activeParent.parentNode}return false}function getClosestRepeaterSectionParent(field){return getClosestParent(field,
getRepeaterSectionSelectionString())}function addDatepickerListener(datepicker){var $datepicker,addOnSelectToDatepicker;$datepicker=jQuery(datepicker);addOnSelectToDatepicker=function(){var onSelect,handleDatepickerOnSelect;onSelect=$datepicker.datepicker("option","onSelect");handleDatepickerOnSelect=function(dateText,instance){if("function"===typeof onSelect)onSelect(dateText,instance);setActiveFormFromFieldElement(datepicker);if(getLastActiveInput()===datepicker)maybeAutoAdvance(datepicker)};$datepicker.datepicker("option",
"onSelect",handleDatepickerOnSelect);$datepicker.datepicker("show")};$datepicker.one("focusin",function(){setTimeout(addOnSelectToDatepicker,1)})}function getActiveFields(){var chatFields,activeFields;if(false!==state.activeForm)chatFields=state.activeForm.querySelectorAll(".frm_active_chat_field");else chatFields=document.querySelectorAll(".frm_active_chat_field");activeFields=[];each(chatFields,function(field){if(hasClass(field,"frm_chat_section")&&field.querySelector(".frm_form_field"))return;
if(fieldIsInInactiveSection(field))return;activeFields.push(field)});return activeFields}function fieldIsInInactiveSection(field){var section=getClosestParent(field,".frm_chat_section");if(!section)return false;return hasClass(section,"frm_inactive_chat_field")}function getFieldSection(field){return getClosestParent(field,".frm_chat_section")}function getActiveField(ifNothingGetFirst){var fields,length,index,field,inputs,activeField;fields=getActiveFields();length=fields.length;for(index=0;index<
length;++index){field=fields[index];inputs=field.querySelectorAll('input[name^="item_meta["]');each(inputs,function(input){if(document.activeElement===input)activeField=field});if("undefined"!==typeof activeField)return activeField}if(fields.length){if(ifNothingGetFirst)return fields[0];return fields[fields.length-1]}return false}function shouldFocusOnFirstFieldByDefault(){return hasClass(document.body,"single-frm_landing_page")||hasClass(document.body,"frm_preview_page")}function focusInputInField(fields){var firstField,
inputs,input;if(!fields.length){if("undefined"===typeof fields.className)return;fields=[fields]}firstField=fields[0];if(hasClass(firstField,"frm_chat_start_page")){firstField.querySelector(".frm_chat_start").focus();return}inputs=getInputsInField(firstField);if(!inputs.length)return;input=inputs[0];if(hasClass(input,"frm_date"))maybeInitializeDatepickerAndFocusDateInput(input);else if("checkbox"===input.getAttribute("type")&&hasClass(input.parentNode,"frm_switch_block"))input.parentNode.querySelector(".frm_switch").focus();
else input.focus()}function maybeInitializeDatepickerAndFocusDateInput(input){var modal;if(hasClass(input,"hasDatepicker")){jQuery(input).datepicker("show");return}modal=getClosestParent(input,".modal");if(modal&&!hasClass(modal,"in"))return;jQuery(document).ready(getDelayedDatepickerInitializeFunction(input))}function getDelayedDatepickerInitializeFunction(input){return function(){setTimeout(function(){triggerDatepickerInitialize(input)},0)}}function triggerDatepickerInitialize(input){jQuery(input).trigger("focusin");
setTimeout(function(){if(hasClass(input,"hasDatepicker"))jQuery(input).datepicker("show")},0)}function goBack(){var activeFields,activeField,activeForm,previousFields,activeRepeater,shouldUpdateCount;activeFields=getActiveFields();activeField=getActiveField(true);previousFields=getPreviousFields(activeField);if(fieldIsInRepeater(activeField))activeRepeater=getClosestParent(activeField,".frm_chat_section");if(previousFields.length){each(previousFields,function(previousField,index){toggleField(previousField,
true,0===index,"right")});toggleField(activeFields,false,false,"right");maybeHideSection(activeField,"right");animateChatWrapper("right")}else{activeForm=getClosestParent(activeField,".frm-show-form");if(thereIsAPreviousPageToGoBackTo(activeForm)){goToPreviousPage(activeForm);return}}tabState.currentIndex=0;toggleChatElements();hideElementsOnStartPage();shouldUpdateCount=true;if(hasClass(getActiveField(),"frm_chat_start_page"))shouldUpdateCount=false;else if(activeRepeater&&activeRepeater===getClosestParent(getActiveField(),
".frm_chat_section"))shouldUpdateCount=false;if(shouldUpdateCount)updateQuestionNumber(-1);syncFinalQuestionClass();syncRepeaterNavigation();maybeSyncProgress()}function thereIsAPreviousPageToGoBackTo(form){return"function"===typeof form.querySelector&&null!==form.querySelector("input.frm_next_page")}function goToPreviousPage(form){var nextPageInput;nextPageInput=form.querySelector("input.frm_next_page");nextPageInput.value=nextPageInput.id.replace("frm_next_p_","");submitForm(form)}function getPreviousFields(field){var fieldSection,
previousField,previousFields,previousFieldSize,rowSize,currentField,currentSize;fieldSection=getFieldSection(field);if(fieldSection&&fieldIsInRepeater(field)){if(fieldIsInFirstRepeatedSection(field))return getPreviousFields(fieldSection);return getClosestRepeaterSectionParent(field).previousElementSibling.querySelectorAll(".frm_inactive_chat_field")}previousField=field.previousElementSibling;while(shouldSkipElement(previousField))previousField=previousField.previousElementSibling;if(!previousField)if(hasClass(field,
"frm_chat_section"))return getFieldsFromPreviousRepeatedSection();else if(fieldSection)return getPreviousFields(fieldSection);else return[];if(!hasClass(previousField,"frm_inactive_chat_field")){if(!getFieldSection(previousField))return[];if(hasClass(previousField,"frm_embed_form_container"))return previousFields.concat(getPreviousFields({previousElementSibling:querySelectorLast(previousField,".frm_inactive_chat_field"),parentNode:previousField,className:"frm0"}));return getPreviousFields(getFieldSection(field))}previousFields=
[previousField];if(hasClass(previousField,"frm_chat_section")){if(sectionIsRepeater(previousField))return previousFields.concat(querySelectorLast(previousField,getRepeaterSectionSelectionString()).querySelectorAll(".frm_inactive_chat_field"));return previousFields}previousFieldSize=getFieldSize(previousField);if(12===previousFieldSize||hasClass(previousField,"frm_first"))return previousFields;rowSize=previousFieldSize;currentField=previousField;while(1){currentField=currentField.previousElementSibling;
if(!currentField||"undefined"===typeof currentField.className||!hasClass(currentField,"frm_inactive_chat_field")||hasClass(currentField,"frm_chat_section"))break;currentSize=getFieldSize(currentField);if(currentSize+rowSize>12)break;rowSize+=currentSize;previousFields.push(currentField);if(hasClass(currentField,"frm_first"))break}return previousFields}function querySelectorLast(element,selector){var elements=element.querySelectorAll(selector);return elements[elements.length-1]}function sectionIsRepeater(section){return null!==
section.querySelector(".frm_add_form_row")}function fieldIsInFirstRepeatedSection(field){var repeatedSection=getClosestRepeaterSectionParent(field);return!repeatedSection.previousElementSibling||!isRepeatedSection(repeatedSection.previousElementSibling)}function getFieldsFromPreviousRepeatedSection(){var currentRepeatedSection,previousRepeatedSection,inputs,lastInput;currentRepeatedSection=getClosestRepeaterSectionParent(getActiveField());if(!currentRepeatedSection)return[];previousRepeatedSection=
currentRepeatedSection.previousElementSibling;if(hasClass(previousRepeatedSection,"frm_add_form_row"))return[];inputs=getInputsInField(previousRepeatedSection);if(!inputs.length)return[];lastInput=inputs[inputs.length-1];return[getClosestParent(lastInput,".frm_chat_section")].concat(getClosestRepeaterSectionParent(lastInput).querySelectorAll(".frm_inactive_chat_field"))}function getFieldSize(field){var length,index,classList,className,strippedClass;classList=field.className.trim().split(/\s+/gi);
length=classList.length;for(index=0;index<length;++index){className=classList[index];if(0!==className.indexOf("frm"))continue;strippedClass=className.substr(3);if(parseInt(strippedClass)>=1&&parseInt(strippedClass)<=12)return parseInt(strippedClass);switch(strippedClass.substr(1)){case "full":return 12;case "three_fourths":return 9;case "two_thirds":return 8;case "half":return 6;case "third":return 4;case "fourth":return 3;case "sixth":return 2}}return 12}function continueChat(){var activeField,activeForm,
activeFields,nextFields,shouldUpdateCount,activeRepeater;activeField=getActiveField();activeForm=getClosestParent(activeField,"form");if(!validateFormSubmit(activeForm))return;shouldUpdateCount=true;if(isStartPage(activeField)){showNonStartPageElements();shouldUpdateCount=false}else if(fieldIsInRepeater(activeField))activeRepeater=getClosestParent(activeField,".frm_chat_section");runConditionalLogic();state.ignoringClickEvents=true;activeFields=getActiveFields();nextFields=getNextFields(activeField);
if(nextFields.length){toggleField(activeFields,false,false,"left");each(nextFields,function(nextField,index){toggleField(nextField,true,0===index,"left")});maybeHideSection(activeField,"left");animateChatWrapper("left")}else if(activeField){if(submitButtonIsConditionallyNotAvailable()){state.ignoringClickEvents=false;setTimeout(function(){var previousActiveFormValue=state.activeForm;state.activeForm=activeForm;if(!submitButtonIsConditionallyNotAvailable()){state.ignoringClickEvents=true;submitForm(activeForm)}state.activeForm=
previousActiveFormValue},1)}else if(submitButtonIsHiddenByPositionSetting())state.ignoringClickEvents=false;else submitForm(activeForm);return}tabState.currentIndex=0;toggleChatElements();maybeHideKeyboardInstructions();if(activeRepeater&&activeRepeater===getClosestParent(getActiveField(),".frm_chat_section"))shouldUpdateCount=false;if(shouldUpdateCount)updateQuestionNumber(1);syncFinalQuestionClass();syncRepeaterNavigation();maybeSyncProgress();triggerEvent(document,"frmShowField");setTimeout(stopIgnoringClickEvents,
0)}function triggerEvent(element,eventType){var event;if(typeof window.CustomEvent==="function")event=new CustomEvent(eventType);else if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(eventType,false,true)}else return;element.dispatchEvent(event)}function updateQuestionNumber(adjustment){var progress=getProgress();if(progress)progress.questionNumber+=adjustment}function showNonStartPageElements(){var chatArrows,progress;chatArrows=getActiveChatWrapper().querySelector(".frm_chat_arrows");
if(chatArrows)toggleClass(chatArrows,"frm_hidden",false);progress=getProgressElement();if(progress)toggleClass(progress,"frm_hidden",false)}function maybeHideSection(childField,animationDirection){var section;if(!childField)return;section=getFieldSection(childField);if(!section)return;if(hasClass(section,"frm_active_chat_field")&&!section.querySelector(".frm_active_chat_field"))toggleField(section,false,false,animationDirection)}function submitForm(form){maybeSyncProgress();toggleClass(getActiveChatWrapper(),
"frm_loading_form",true);jQuery(form).trigger("submit")}function validateFormSubmit(form){var errors,keys,hasVisibleErrors;if(hasClass(form,"frm_loading_form")&&waitingOnALookupListToLoad())return false;errors=frmFrontForm.validateFormSubmit(form);keys=Object.keys(errors);hasVisibleErrors=checkVisibleInputsForError(keys);return!hasVisibleErrors}function checkVisibleInputsForError(keys){var visibleInputs,length,index,input,name,fieldId;visibleInputs=getVisibleInputs(true);length=visibleInputs.length;
for(index=0;index<length;++index){input=visibleInputs[index];name=input.getAttribute("name");if(!name){input=input.querySelector("input");if(input)name=input.getAttribute("name")}if(name){fieldId=name.split("]")[0].replace("item_meta[","");if(-1!==keys.indexOf(fieldId)||checkKeysForCompositeKeyMatch(keys,fieldId))return true}}return false}function checkKeysForCompositeKeyMatch(keys,fieldId){var length,index,key,split;length=keys.length;for(index=0;index<length;++index){key=keys[index];if(-1!==key.indexOf("-")){split=
key.split("-");if(3===split.length&&split[1]===fieldId)return true;else if(2===split.length&&split[0]===fieldId)return true}}return false}function waitingOnALookupListToLoad(){var waiting=false;each(getActiveFields(),function(field){if(isLookupList(field))waiting=true});return waiting}function runConditionalLogic(){if(typeof __frmHideOrShowFields==="undefined")return;frmProForm.hideOrShowFields(__frmHideOrShowFields,"chat");toggleSectionChildren()}function toggleSectionChildren(){each(__frmHideOrShowFields,
function(fieldId){var field,sectionInputs,display;field=document.getElementById("frm_field_"+fieldId+"_container");if(!field||!hasClass(field,"frm_section_heading"))return;sectionInputs=document.querySelectorAll('[data-sectionid="'+fieldId+'"]');display="none"!==field.style.display?"block":"none";each(sectionInputs,function(field){var chatFieldParent=field.closest(".frm_active_chat_field, .frm_inactive_chat_field");if(chatFieldParent)chatFieldParent.style.display=display})})}function stopIgnoringClickEvents(){state.ignoringClickEvents=
false}function getNextFields(field,args){var nextField,fieldSection,includeActiveFields,nextFields,selector,nextFieldSize,rowSize,currentField,currentSize;nextField=field.nextElementSibling;while(shouldSkipElement(nextField,args))nextField=nextField.nextElementSibling;fieldSection=getFieldSection(field);if(fieldSection&&fieldIsInRepeater(field)){if(fieldIsInLastRepeatedSection(field))return getNextFields(fieldSection);return getClosestRepeaterSectionParent(field).nextElementSibling.querySelectorAll(".frm_inactive_chat_field")}if(!nextField&&
fieldSection){if(fieldIsInEmbeddedForm(field))return getNextFieldAfterEmbeddedForm(field,args);return getNextFields(field.parentNode,args)}includeActiveFields="undefined"!==typeof args&&"undefined"!==typeof args.includeActiveFields&&args.includeActiveFields;if(!nextField||!hasClass(nextField,"frm_inactive_chat_field"))if(!nextField||!includeActiveFields||!hasClass(nextField,"frm_active_chat_field"))return[];nextFields=[nextField];selector=".frm_inactive_chat_field";if(includeActiveFields)selector=
".frm_active_chat_field, "+selector;if(hasClass(nextField,"frm_chat_section")){if(sectionIsRepeater(nextField))return nextFields.concat(nextField.querySelector(getRepeaterSectionSelectionString()).querySelectorAll(".frm_inactive_chat_field"));if(hasClass(nextField,"frm_embed_form_container"))return nextFields.concat(getNextFields({nextElementSibling:nextField.querySelector(selector),parentNode:nextField,className:"frm0"},args));return nextFields}nextFieldSize=getFieldSize(nextField);if(12===nextFieldSize)return nextFields;
rowSize=nextFieldSize;currentField=nextField;while(1){currentField=currentField.nextElementSibling;if(!currentField||"undefined"===typeof currentField.className)break;if(hasClass(currentField,"frm_first"))break;if(!hasClass(currentField,"frm_inactive_chat_field"))if(!includeActiveFields||!hasClass(currentField,"frm_active_chat_field"))break;currentSize=getFieldSize(currentField);if(currentSize+rowSize>12)break;rowSize+=currentSize;nextFields.push(currentField)}return nextFields}function fieldIsInLastRepeatedSection(field){var repeatedSection=
getClosestRepeaterSectionParent(field);return!repeatedSection.nextElementSibling||!isRepeatedSection(repeatedSection.nextElementSibling)}function fieldIsInEmbeddedForm(field){return false!==getClosestParent(field,".frm_embed_form_container")}function getNextFieldAfterEmbeddedForm(field,args){return getNextFields(getClosestParent(field,".frm_embed_form_container"),args)}function shouldSkipElement(element,args){var shouldSkipConditionallyHiddenField;if(!element)return false;shouldSkipConditionallyHiddenField=
"undefined"===typeof args||"undefined"===typeof args.includeConditionallyHiddenFields||!args.includeConditionallyHiddenFields;if(shouldSkipConditionallyHiddenField&&isConditionallyHidden(element))return true;return isHiddenOtherOption(element)||isHiddenInputType(element)||isSkippableRepeaterElement(element)||isInvisibleCaptcha(element)||isInvisibleSection(element)||isHiddenByClass(element)||isHiddenSectionLabel(element)}function isHiddenOtherOption(element){return hasClass(element,"frm_pos_none")}
function isHiddenInputType(element){return"input"===getNodeType(element)&&"hidden"===element.getAttribute("type")}function isConditionallyHidden(element){return"none"===element.style.display&&!isLookupList(element)&&!isDynamicListLoading(element)}function isSkippableRepeaterElement(element){return hasClass(element,"frm_repeat_buttons")||hasClass(element,"frm_button")||"h3"===getNodeType(element)}function isInvisibleCaptcha(element){var captcha=element.querySelector(".frm-g-recaptcha");return captcha&&
"invisible"===captcha.getAttribute("data-size")}function isInvisibleSection(element){return hasClass(element,"frm_invisible_section")}function isHiddenByClass(element){return hasClass(element,"frm_hidden")||hasClass(element,"frm_invisible")}function isHiddenSectionLabel(element){var hasHiddenSectionLabel;if(hasClass(element,"frm_hide_section"))return true;if(!hasClass(element,"frm_chat_section"))return false;hasHiddenSectionLabel=false;each(element.children,function(child){if("H3"===child.nodeName&&
hasClass(child,"frm_pos_hidden"))hasHiddenSectionLabel=true});return hasHiddenSectionLabel}function isLookupList(fieldContainer){var field,fieldID,lookupData;if("undefined"===typeof __FRMLOOKUP)return false;field=fieldContainer.querySelector("input");if(!field||"hidden"!==field.getAttribute("type"))return false;fieldID=field.getAttribute("name").replace("item_meta[","").replace("]","");if(typeof __FRMLOOKUP[fieldID]==="undefined")return false;lookupData=__FRMLOOKUP[fieldID];return"data"===lookupData.inputType}
function isDynamicListLoading(fieldContainer){var fieldId,rule;if("undefined"===typeof __frmDepDynamicFields||"undefined"===typeof __FRMRULES)return false;fieldId=fieldContainer.id.replace("frm_field_","").replace("_container","");if(-1===__frmDepDynamicFields.indexOf(fieldId)||!__FRMRULES.hasOwnProperty(fieldId))return false;rule=__FRMRULES[fieldId];if("data"!==rule.fieldType)return false;return null!==fieldContainer.querySelector(".frm-loading-img")}function fieldIsInRepeater(field){if(!field||
!field.parentNode)return false;return isRepeatedSection(field.parentNode)&&false===getClosestParent(field,".frm_embed_form_container")}function queryAndToggleChatElements(on){queryAndToggleChatWrapperChild(".frm_continue_chat_wrapper",on);queryAndToggleChatWrapperChild(".frm_chat_arrows",on);queryAndToggleChatWrapperChild(".frm-key-instructions",on)}function queryAndToggleChatWrapperChild(selector,on){var target=getActiveChatWrapper().querySelector(selector);if(target)target.style.display=on?"":"none"}
function toggleField(field,toggleOn,focus,animationDirection){var repeaterSection,handleFieldAnimationComplete,animationArgs,formWidth;if("undefined"===typeof field.className){each(field,function(currentField){toggleField(currentField,toggleOn,focus,animationDirection)});return}if(toggleOn){repeaterSection=getClosestRepeaterSectionParent(field);if(repeaterSection)toggleClass(repeaterSection,"frm_hidden_repeater_section",false);else maybeAddSectionHeader(field)}if("undefined"===typeof animationDirection){if(toggleOn){field.style.opacity=
1;field.style.left=0;toggleClass(field,"frm_active_chat_field",true);toggleClass(field,"frm_inactive_chat_field",false);if(focus)focusInputInField(field)}else{toggleClass(field,"frm_active_chat_field",false);toggleClass(field,"frm_inactive_chat_field",true)}return}state.animatingFields=true;state.ignoringClickEvents=true;handleFieldAnimationComplete=function(){toggleClass(field,"frm_animating_chat_field",false);field.style.transform="";state.animatingFields=false;state.ignoringClickEvents=false;if(focus)focusInputInField(field)};
animationArgs={};formWidth=jQuery(field).closest(".frm_chat_form").outerWidth();if("left"===animationDirection)if(toggleOn){field.style.left=formWidth+"px";animationArgs.left=0}else{field.style.left=0;animationArgs.left=-formWidth}else if("right"===animationDirection)if(toggleOn){field.style.left="-"+formWidth+"px";animationArgs.left=0}else{field.style.left=0;animationArgs.left=jQuery(field).outerWidth()}if(toggleOn){field.style.opacity=0;animationArgs.opacity=1}else{field.style.opacity=1;animationArgs.opacity=
0}if(toggleOn){field.style.top="";field.style.width="";toggleClass(field,"frm_animating_chat_field",true);toggleClass(field,"frm_active_chat_field",true);toggleClass(field,"frm_inactive_chat_field",false);if(field.querySelector(".frm_likert"))window.dispatchEvent(new Event("resize"))}else{if(hasClass(field.parentNode,"frm_chat_section"))field.style.top=getFieldInSectionTopValue(field);jQuery(field).width(jQuery(field).width());if(hasClass(field.previousElementSibling,"frm_animating_chat_field")&&
hasClass(field.previousElementSibling,"frm_inactive_chat_field"))field.style.transform="translateX("+getTranslateXValue(field)+"px)";toggleClass(field,"frm_animating_chat_field",true);toggleClass(field,"frm_inactive_chat_field",true);toggleClass(field,"frm_active_chat_field",false)}jQuery(field).animate(animationArgs,500,handleFieldAnimationComplete)}function maybeAddSectionHeader(field){var sectionIdElement,sectionId,section,sectionHeader,leftPadding,bottomPadding,clone;if(hasClass(field,"frm_section_heading")){maybeAddSectionFieldLabel(field);
return}sectionIdElement=field.querySelector("[data-sectionid]");if(!sectionIdElement)return;sectionId=parseInt(sectionIdElement.getAttribute("data-sectionid"));if(!sectionId)return;section=document.getElementById("frm_field_"+sectionId+"_container");if(!section)return;sectionHeader=section.querySelector("h3");if(!sectionHeader)return;leftPadding=window.getComputedStyle(sectionHeader).getPropertyValue("padding-left");bottomPadding=window.getComputedStyle(sectionHeader).getPropertyValue("padding-bottom");
field.style.setProperty("--section-padding",leftPadding);clone=sectionHeader.cloneNode(true);clone.style.paddingBottom=0;setTimeout(function(){var isFirstFieldInRow,widthTarget;isFirstFieldInRow=!jQuery(field).prevAll(".frm_active_chat_field").length;widthTarget=isFirstFieldInRow?getClosestParent(field,"form"):field;clone.style.width=jQuery(widthTarget).outerWidth()+"px"},0);field.style.paddingBottom=bottomPadding;toggleClass(field,"frm_section_heading",true);field.insertBefore(clone,field.firstChild)}
function maybeAddSectionFieldLabel(field){var fieldLabel,heading;if(!hasClass(field,"frm_chat_section"))return;fieldLabel=field.querySelector("label.frm_chat_section_label");if(fieldLabel)return;heading=field.querySelector("h3");if(!heading)return;fieldLabel=document.createElement("label");fieldLabel.className="frm_primary_label frm_chat_section_label";fieldLabel.textContent=heading.textContent;field.insertBefore(fieldLabel,field.firstChild)}function animateChatWrapper(direction){var wrapper,formWidth,
animationArgs;wrapper=getActiveChatWrapper();formWidth=jQuery(state.activeForm).outerWidth();wrapper.style.opacity=0;animationArgs={opacity:1};if("left"===direction){wrapper.style.left=formWidth+"px";animationArgs.left=0}else{wrapper.style.left=-formWidth+"px";animationArgs.left=0}jQuery(wrapper).animate(animationArgs,500)}function getFieldInSectionTopValue(field){var section,header,headerHeight;section=field.parentNode;headerHeight=0;header=section.querySelector("h3");if(header&&!hasClass(header,
"frm_pos_none")){headerHeight=getStyleProperyInPixels(section,"marginTop");headerHeight+=jQuery(header).outerHeight()+getStyleProperyInPixels(header,"marginBottom")}return headerHeight+"px"}function getStyleProperyInPixels(element,key){var style=element.currentStyle||window.getComputedStyle(element);return parseInt(style[key].replace("px",""))}function getTranslateXValue(field){var totalWidth,columnSize,gapSize,sizeOfPreviousFields,translateXValue;totalWidth=jQuery(getClosestParent(field,".frm_chat_form")).width();
columnSize=totalWidth*.78/12;gapSize=(totalWidth-columnSize*12)/11;sizeOfPreviousFields=0;jQuery(field).prevAll(".frm_animating_chat_field.frm_inactive_chat_field").each(function(){sizeOfPreviousFields+=getFieldSize(this)});translateXValue=(columnSize+gapSize)*sizeOfPreviousFields;return translateXValue}function handleClickEvents(event){var target,nodeType;if(state.ignoringClickEvents)return;target=event.target;if(hasClass(target,"frm_label_button_container"))handleRadioButtonClick(event);else{nodeType=
getNodeType(target);if("input"===nodeType&&"radio"===target.getAttribute("type")){if(!clickWasTriggeredByArrowKeys(event))handleRadioButtonClick(event)}else if("option"===nodeType&&!hasClass(target,"frm_other_trigger"))handleDropdownClick(event);else if("input"===nodeType&&"checkbox"===target.getAttribute("type")){state.activeForm=getClosestParent(target,".frm_chat_form");maybeSyncProgress()}}}function clickWasTriggeredByArrowKeys(event){return 0===event.clientX&&0===event.clientY}function getNodeType(element){return element.nodeName.toLowerCase()}
function handleRadioButtonClick(event){setTimeout(getRadioButtonClickHandler(event),0)}function getRadioButtonClickHandler(event){return function(){var target,lastActiveInput,isOtherOption,radioInput,radio,otherOption;target=event.target;setActiveFormFromFieldElement(target);lastActiveInput=getLastActiveInput();isOtherOption=lastActiveInput&&hasClass(lastActiveInput,"frm_other_input");if(!isOtherOption){if(!lastActiveInput||"input"!==getNodeType(lastActiveInput)||"radio"!==lastActiveInput.getAttribute("type"))return;
radioInput=getClosestParent(target,".frm_form_field").querySelector('input[type="radio"]');if(!radioInput||lastActiveInput.getAttribute("name")!==radioInput.getAttribute("name"))return}radio=getClosestParent(target,".frm_radio");if(radio){otherOption=radio.querySelector("input.frm_other_input");if(otherOption&&!hasClass(otherOption,"frm_pos_none")){state.activeForm=getClosestParent(radio,".frm_chat_form");toggleContinueButton(true);enableNextArrow();return}}maybeAutoAdvance(target)}}function enableNextArrow(){var nextArrow=
getActiveChatWrapper().querySelector(".frm_chat_next_arrow");if(!nextArrow)return;toggleClass(nextArrow,"frm_disabled_arrow",false)}function handleDropdownClick(event){var select=event.target.parentNode;setActiveFormFromFieldElement(select);if(getLastActiveInput()===select&&"multiple"!==select.getAttribute("multiple"))maybeAutoAdvance(select);else maybeSyncProgress()}function getLastActiveInput(){var visibleInputs=getVisibleInputs();return visibleInputs.length?visibleInputs[visibleInputs.length-1]:
false}function handleChangeEvents(event){var target,nodeType,type,callback;target=event.target;setActiveFormFromFieldElement(target);if(false===state.activeForm)return;setTimeout(toggleChatElements,0);nodeType=getNodeType(target);type=target.getAttribute("type");callback=function(){maybeAutoAdvance(target)};if("input"===nodeType&&"checkbox"===type&&target.checked&&hasClass(target.parentElement,"frm_switch_block"))setTimeout(callback,500);else if("input"===nodeType&&"file"===type&&getClosestParent(target,
".frm_single_upload")&&target.files.length&&getLastActiveInput()===getClosestParent(target,".frm_active_chat_field"))callback()}function handleInputEvents(event){var target,nodeType,type;target=event.target;setActiveFormFromFieldElement(target);if(false===state.activeForm)return;nodeType=getNodeType(target);type=target.getAttribute("type");if("textarea"===nodeType||"input"===nodeType&&-1===["radio","checkbox"].indexOf(type))maybeSyncProgress()}function hasClass(element,targetClass){var className=
" "+element.className+" ";return-1!==className.indexOf(" "+targetClass+" ")}function each(items,callback){var index,length;length=items.length;for(index=0;index<length;index++)callback(items[index],index)}function handleKeyEvent(event){var code;if(state.ignoringClickEvents)return;event=event||window.event;if("undefined"!==typeof event.key)code=event.key;else if("undefined"!==typeof event.keyCode)switch(event.keyCode){case 9:code="Tab";break;case 13:code="Enter";break}switch(code){case "Tab":handleTabEvent(event);
break;case "Enter":handleEnterEvent(event);break}}function handleTabEvent(event){var movingForward,activeElement,visibleInputs,numberOfVisibleInputs,currentInputIndex,preventTabbingToNextField;movingForward=!event.shiftKey;activeElement=event.target;if(hasClass(activeElement,"frm_verify")){setActiveFormFromFieldElement(activeElement);if(!fieldIsInRepeater(getActiveField()))continueChat();return}if(!isAFormidableInput(activeElement))return;setActiveFormFromFieldElement(document.activeElement);if(document.activeElement!==
activeElement)return;if(fieldIsInRepeater(getClosestParent(document.activeElement,".frm_active_chat_field"))||getClosestParent(document.activeElement,".frm_likert"))return;if("keydown"===event.type){visibleInputs=getVisibleInputs();tabState.visibleInputs=visibleInputs}else visibleInputs=tabState.visibleInputs;numberOfVisibleInputs=visibleInputs.length;currentInputIndex=-1;each(visibleInputs,function(input,index){if(input===activeElement)currentInputIndex=index});if(-1===currentInputIndex){if(!movingForward&&
hasClass(activeElement,"frm_switch")&&!jQuery(getClosestParent(activeElement,".frm_active_chat_field")).prevAll(".frm_active_chat_field").length){event.preventDefault();goBack()}return}if("radio"===activeElement.type){event.preventDefault();if("keydown"===event.type)handleTabOnRadioButton(activeElement,movingForward);return}if("keydown"===event.type){preventTabbingToNextField=movingForward?currentInputIndex===numberOfVisibleInputs-1:0===currentInputIndex;if(preventTabbingToNextField){tabState.currentIndex=
currentInputIndex;event.preventDefault()}return}if(0===currentInputIndex&&!movingForward){event.preventDefault();goBack();return}if(movingForward&&tabState.currentIndex===numberOfVisibleInputs-1){event.preventDefault();continueChat()}}function handleTabOnRadioButton(activeElement,movingForward){var field=getClosestParent(activeElement,".frm_active_chat_field");if(movingForward)handleRadioTabForward(field);else handleRadioTabBack(field)}function handleRadioTabBack(field){var $previousActiveField=jQuery(field).prevAll(".frm_active_chat_field");
if($previousActiveField.length)focusInputInField($previousActiveField.get(0));else goBack()}function handleRadioTabForward(field){var $nextActiveField=jQuery(field).nextAll(".frm_active_chat_field");if($nextActiveField.length)focusInputInField($nextActiveField.get(0));else continueChat()}function handleEnterEvent(event){var element,form,shouldAdvance;element=event.target;if("keydown"!==event.type||!isAFormidableInput(element))return;form=getClosestParent(element,".frm_chat_form");if(!form)return;
shouldAdvance=false;if("textarea"===getNodeType(element))shouldAdvance=!event.shiftKey;else if("input"===getNodeType(element))shouldAdvance=true;else if(hasClass(element,"frm_active_chat_field")&&"0"===element.getAttribute("tabindex"))shouldAdvance=true;else if(hasClass(element,"frm_switch"))shouldAdvance=true;if(shouldAdvance){event.preventDefault();state.activeForm=form;continueChat()}}function getVisibleInputs(includeHiddenFieldsWithErrorMessages){var visibleInputs=[];each(getActiveFields(),function(visibleField){each(getInputsInField(visibleField,
includeHiddenFieldsWithErrorMessages),function(visibleInput){visibleInputs.push(visibleInput)})});return visibleInputs}function getInputsInField(field,includeHiddenFieldsWithErrorMessages){var inputs=[];each(field.querySelectorAll("input, textarea, select, div.frm_date_inline, iframe.ssa_booking_iframe"),function(input){var type;if(hasClass(input,"ed_button")||hasClass(input,"frm_pos_none")||hasClass(input,"frm_verify"))return;type=input.getAttribute("type");if(("hidden"===type||"file"===type)&&(!includeHiddenFieldsWithErrorMessages||
!input.getAttribute("data-reqmsg")))return;if("select"===getNodeType(input)&&(hasClass(input,"ui-datepicker-year")||hasClass(input,"ui-datepicker-month")))return;if(hasClass(input,"chosen-search-input"))return;if("string"===typeof input.name&&"[typed]"===input.name.substr(-7)&&hasClass(getClosestParent(input,".sigWrapper"),"current"))return;if(isInputForCurrencyCalculation(input))return;inputs.push(input)});if(0===inputs.length&&"0"===field.getAttribute("tabindex"))inputs=[field];return inputs}function isInputForCurrencyCalculation(input){var wrapper=
input.parentNode;if(!hasClass(wrapper,"frm_hidden")||!hasClass(wrapper,"frm_input_group")||!wrapper.previousElementSibling)return false;return hasClass(wrapper.previousElementSibling,"frm_total_formatted")}function handleDropzoneUploadSuccess(file){var dropzone=getClosestParent(file.previewElement,".frm_dropzone");if(getLastActiveInput()===getClosestParent(dropzone,".frm_active_chat_field")){state.activeForm=getClosestParent(dropzone,".frm_chat_form");maybeAutoAdvance(dropzone)}}function addAppointmentListener(){window.addEventListener("message",
listenForAppointment,false)}function listenForAppointment(e){if(shouldAutoAdvanceAppointmentField(e)){removeAllErrors();maybeAutoAdvance(e.source.frameElement)}}function shouldAutoAdvanceAppointmentField(e){var iframe;if(typeof e.data!=="object"||!e.data.hasOwnProperty("ssaType")||e.data.ssaType!=="appointment")return false;iframe=e.source.frameElement;return iframe===getLastActiveInput()&&""!==iframe.previousElementSibling.value}function onFinalQuestion(){if(isMultiPage()&&!isOnFinalPage())return false;
return 0===getNextFields(getActiveField()).length}function isMultiPage(){return null!==state.activeForm.querySelector(".frm_next_page")||null!==state.activeForm.querySelector('[name^="frm_page_order_"]')}function isOnFinalPage(){return null===state.activeForm.querySelector('[name^="frm_page_order_"]')}function isAFormidableInput(element){var tagType,inputName;if(hasClass(element,"frm_active_chat_field"))return true;if(hasClass(element,"frm_switch"))return true;tagType=element.tagName.toLowerCase();
if(-1===["input","textarea","select"].indexOf(tagType))return false;inputName=element.getAttribute("name");return"string"===typeof inputName&&0===inputName.indexOf("item_meta[")}function removeAllErrors(){jQuery(".form-field").removeClass("frm_blank_field has-error");jQuery(".form-field .frm_error").replaceWith("");jQuery(".frm_error_style").remove()}function resetForms(){queryAndToggleChatElements(true);state.ignoringClickEvents=false;state.animatingFields=false;each(getChatForms(),resetForm);initialize()}
function resetForm(form,formIndex){var firstInactiveField=form.querySelector(".frm_inactive_chat_field");each(getNextFields({nextElementSibling:firstInactiveField,parentNode:firstInactiveField.parentNode,className:"frm0"}),function(field,index){toggleField(field,true,0===index&&0===formIndex)})}initialize();window.onpageshow=function(event){if(event.persisted)resetForms()}})();
